---
title: Monitoring PCF Metrics
owner: PCF Metrics
---

This topic explains how to monitor the health of Pivotal Cloud Foundry (PCF) Metrics.

For general information about monitoring PCF, see [Monitoring Pivotal Cloud Foundry](https://docs.pivotal.io/pivotalcf/monitoring/index.html).

## Healthwatch

The premier way to monitor PCF Metrics is using [Healthwatch](https://docs.pivotal.io/pcf-healthwatch/installing.html). 
Once installed, navigate to the JobHealth dashboard to view the PCF Metrics deployment which is named `apmPostgres`.

Healthwatch also supports [alerting](https://docs.pivotal.io/pcf-healthwatch/api/alerts.html) based on VM persistent 
disk percentage (system.disk.persistent.percent) and VM health (system.healthy). 

## BOSH Metrics

The most coarse way to monitor PCF Metrics is using the metrics that are emitted by BOSH.
This will allow you to monitor the VMs and processes that comprise the PCF Metrics deployment.

BOSH metrics are emitted into the firehose via the bosh-system-metrics-forwarder. 

PCF Metrics VMs report their persistent disk usage via the following format. 
The persistent disk usage metrics can be used to inform PCF Metrics sizing decisions. 
Persistent disk usage can be monitored via the `cf nozzle` command.
For example, running the command `cf nozzle -f ValueMetric | grep apmPostgres | fgrep "system.disk.persistent.percent"` 
will show raw metrics similar to those below.
```
origin:"bosh-system-metrics-forwarder" eventType:ValueMetric timestamp:1537204730000000000 deployment:"apmPostgres" job:"mysql" index:"redacted" ip:"10.10.0.7" tags:<key:"id" value:"redacted" > valueMetric:<name:"system.disk.persistent.percent" value:8 unit:"Percent" >
origin:"bosh-system-metrics-forwarder" eventType:ValueMetric timestamp:1537204733000000000 deployment:"apmPostgres" job:"redis" index:"redacted" ip:"10.10.0.7" tags:<key:"id" value:"redacted" > valueMetric:<name:"system.disk.persistent.percent" value:33 unit:"Percent" >
origin:"bosh-system-metrics-forwarder" eventType:ValueMetric timestamp:1537204733000000000 deployment:"apmPostgres" job:"postgres" index:"redacted" ip:"10.10.0.7" tags:<key:"id" value:"redacted" > valueMetric:<name:"system.disk.persistent.percent" value:26 unit:"Percent" >
```

PCF Metrics VMS also report the VM health.
Please see [PCF Metrics troubleshooting](https://docs.pivotal.io/pcf-metrics/troubleshooting.html) if any of the 
PCF Metrics VMs enter an unhealthy state for an extended period of time not during an upgrade.
VM Health can be monitored via the `cf nozzle` command.
For example, running the command `cf nozzle -f ValueMetric | grep apmPostgres | fgrep "system.healthy"` will show raw 
metrics similar to those below.
```
origin:"bosh-system-metrics-forwarder" eventType:ValueMetric timestamp:1537204820000000000 deployment:"apmPostgres" job:"mysql" index:"redacted" ip:"10.10.0.7" tags:<key:"id" value:"redacted" > valueMetric:<name:"system.healthy" value:1 unit:"b" >
origin:"bosh-system-metrics-forwarder" eventType:ValueMetric timestamp:1537204820000000000 deployment:"apmPostgres" job:"redis" index:"redacted" ip:"10.10.0.7" tags:<key:"id" value:"redacted" > valueMetric:<name:"system.healthy" value:1 unit:"b" >
origin:"bosh-system-metrics-forwarder" eventType:ValueMetric timestamp:1537204820000000000 deployment:"apmPostgres" job:"postgres" index:"redacted" ip:"10.10.0.7" tags:<key:"id" value:"redacted" > valueMetric:<name:"system.healthy" value:1 unit:"b" >
```


